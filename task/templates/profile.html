<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>User Information - P5</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Combo&family=Lobster&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/static/custom_styles.css">
</head>
<body>
    <div id="edit-form" style="display: none;">
        <h2>Edit Profile</h2>
        <form>
            <label for="username">Username:</label><br>
            <input type="text" id="username" name="username"><br>
            <label for="age">Age:</label><br>
            <input type="text" id="age" name="age"><br>
            <label for="gender">Gender:</label><br>
            <input type="text" id="gender" name="gender"><br>
            <label for="location">Location:</label><br>
            <input type="text" id="location" name="location"><br>
            <label for="university">University:</label><br>
            <input type="text" id="university" name="university"><br>
            <!-- Avatar upload field -->
            <label for="avatar">Avatar:</label><br>
            <input type="file" id="avatar" name="avatar" accept="image/*"><br>
            <img id="avatar-preview" src="" alt="Avatar preview" style="display: none;"><br>

            <button type="button" id="cancel-button">Cancel</button>
            <button type="submit" id="submit-button">Submit</button>
        </form>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-12 fixed-top bg-light">

                <div class="top-bar d-flex justify-content-between align-items-center p-2">
                    <div class="search d-flex align-items-center">
                        <img src="/static/search_icon.png" alt="Search Icon" style="width: 20px; height: 20px; margin-right: 10px;">
                        <input type="text" placeholder="Search..." class="search-box">
                        <button class="button">Search</button>
                    </div>
                    <div class="title">User Homepage</div>
                </div>
        </div>
    </div>


    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <div class="sidebar sticky-top">
                    <br>
                    <br>
                    <div id="sidebar_home"><a href="homepage.html">Home</a></div>
                    <br>
                    {% if current_user.is_authenticated %}
                        <a href="profile.html"><img src="/static/profile_icon.png" alt="Profile"> Profile</a>
                        <br>
                        <a href="accept_task.html"><img src="/static/accept_task_icon.png" alt="Accept Task"> Accept Task</a>
                        <br>
                        <a href="post_task.html"><img src="/static/post_task_icon.png" alt="Post Task"> Post Task</a>
                        <br>
                        <a href="user/logout"><img src="/static/logout_icon.png" alt="Logout"> Logout</a>
                    {% else %}
                        <a href="user/login"><img src="/static/search_icon.png" alt="Login"> Login</a>
                        <br>
                        <a href="user/register"><img src=/static/profile_icon.png" alt="Register"> Register</a>
                    {% endif %}
    
                    <br>
                    <a href="#"><img src="/static/location_icon.png" alt="Location"> Location</a>
                    <br>
                    <a href="#"><img src="/static/settings_icon.png" alt="Settings"> Settings</a>
                    <br>
                    <br>
                    <p style="text-align: center; font-weight: bold;">v.3.0.1</p>
                </div>
            </div>
            
            <div class="col-md-9 main">
                <!-- User Information Section -->
                <div class="row user-info">
                    <div class="col-md-3 d-flex flex-column align-items-center">
                        <div class="rounded-circle">
                            <img src="profile_icon.png" alt="User photo">
                        </div>

                        <h3>Username</h3>
                    </div>
                    <div class="col-md-9">

                        <div class="info-bar">
                            <div id="personal-info"><h2>Personal Info </h2></div>

                                <p>Age: 25</p>
                                <p>Gender: Male</p>
                                <p>Location: Crawley</p>
                                <p>University: UWA</p>
                                <button class="button" id="edit-button">Edit Profile</button>
                                <button class="button" id="change-password-button">Change Password</button>
                        </div>

                    </div>
                </div>

               <!-- Ranking Section -->
                <div class="row ranking">
                    <div class="col-md-12 task-item">
                        <p>Post Task</p>
                        <div class="ranking-bar"></div>
                    </div>
                    <div class="col-md-12 task-item">
                        <p>Accept Task</p>
                        <div class="ranking-bar"></div>
                    </div>
                    <div class="col-md-12 task-item">
                        <p>Task Ranking</p>
                        <div class="ranking-bar"></div>
                    </div>
                </div>

                <!-- Task History Section -->
                <div class="row task-history">
                    <div class="col-md-12">
                        <div class="info-bar mb-3">
                            <div class="info" id="task-info">
                                <p>Task 1</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row task-history">
                    <div class="col-md-12">
                        <div class="info-bar mb-3">
                            <div class="info" id="task-info">
                                <p>Task 1</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row task-history">
                    <div class="col-md-12">
                        <div class="info-bar mb-3">
                            <div class="info" id="task-info">
                                <p>Task 1</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row task-history">
                    <div class="col-md-12">
                        <div class="info-bar mb-3">
                            <div class="info" id="task-info">
                                <p>Task 1</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row task-history">
                    <div class="col-md-12">
                        <div class="info-bar mb-3">
                            <div class="info" id="task-info">
                                <p>Task 1</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row task-history">
                    <div class="col-md-12">
                        <div class="info-bar mb-3">
                            <div class="info" id="task-info">
                                <p>Task 1</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



        </div>
    </div>


</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.getElementById('edit-button').addEventListener('click', function() {
        document.getElementById('edit-form').style.display = 'block';
    });

    document.getElementById('cancel-button').addEventListener('click', function() {
        document.getElementById('edit-form').style.display = 'none';
    });

    document.getElementById('logout-link').addEventListener('click', function(event) {
    event.preventDefault(); // Prevent the link from being followed
    var result = confirm('Are you sure you want to logout?'); // Show the confirm dialog
    if (result) {
        // If the user clicked "OK", redirect to the homepage
        window.location.href = 'homepage.html'; // Replace 'homepage.html' with the URL of your homepage
    }
});

document.getElementById('avatar').addEventListener('change', function(e) {
    var reader = new FileReader();
    reader.onload = function(e) {
        document.getElementById('avatar-preview').src = e.target.result;
        document.getElementById('avatar-preview').style.display = 'block';
    };
    reader.readAsDataURL(this.files[0]);
});

    document.getElementById('submit-button').addEventListener('click', function(e) {
        var avatar = document.getElementById('avatar').files[0];
        if (avatar) {
            var reader = new FileReader();
            reader.onload = function(e) {
                document.querySelector('.rounded-circle img').src = e.target.result;
            };
            reader.readAsDataURL(avatar);
        }
        // Close the form here
        document.getElementById('edit-form').style.display = 'none';
        // Prevent the form from being submitted
        e.preventDefault();
    });

</script>
</html>
